import{d as R,a as A,v as E,z as p,o,i as d,g as l,w as s,f as m,h as t,e as i,S as f,B as y,q as b,a0 as N,X as O,a1 as g}from"./index-a86022ab.js";import{D as L}from"./Dropdown-068a4fad.js";import{d as n}from"./vuedraggable.umd-9334f31c.js";import{u as j}from"./ticketStatus-6f8b6098.js";import{c as D}from"./listManager-63aba0ed.js";import{_ as F}from"./LV.vue_vue_type_script_setup_true_lang-23701244.js";import{_ as I}from"./PageTitle.vue_vue_type_script_setup_true_lang-022e67c2.js";import"./iconify-6a43d462.js";import"./EmptyMessage.vue_vue_type_script_setup_true_lang-123dde9f.js";import"./TabButtons-ea997705.js";import"./label-fe9568ec.js";import"./error-90c51c34.js";const V={class:"flex flex-col"},z={class:"flex gap-2"},K={class:"flex items-center justify-between text-base text-gray-700"},M={class:"flex gap-4"},P={key:0},$={key:0},se=R({__name:"TicketsCustomer",setup(H){const C=A(),T=j(),v=[{label:"#",key:"name",width:"w-12"},{label:"Subject",key:"subject",width:"w-96"},{label:"Status",key:"status",width:"w-32"},{label:"Priority",key:"priority",width:"w-32"},{label:"First Response",key:"response_by",width:"w-32"},{label:"Resolution",key:"resolution_by",width:"w-32"},{label:"Created",key:"creation",width:"w-32"}],a=D({doctype:"HD Ticket",pageLength:20,fields:["name","creation","subject","status","priority","response_by","resolution_by","first_responded_on","resolution_date"],auto:!0,transform:r=>{for(const c of r)c.onClick={name:N,params:{ticketId:c.name}}}}),k=["Open","Replied"],h=E("All tickets"),x=[{label:"All tickets",onClick(){u("All tickets",{status:void 0})}},{label:"Open tickets",onClick(){u("Open tickets",{status:["in",k]})}},{label:"Closed tickets",onClick(){u("Closed tickets",{status:["not in",k]})}}];function u(r,c){a.update({...a,filters:{...a.filters,...c}}),a.reload(),h.value=r}function S(r){switch(r){case"Replied":return"Awaiting reply";default:return r}}return(r,c)=>{const w=p("Button"),B=p("RouterLink"),_=p("Badge");return o(),d("div",V,[l(I,{title:"Tickets"},{right:s(()=>[m("div",z,[m("div",K,[m("div",M,[l(t(L),{options:x},{default:s(({open:e})=>[l(w,{label:h.value,"icon-right":e?"chevron-up":"chevron-down",theme:"gray",variant:"outline"},null,8,["label","icon-right"])]),_:1})])]),t(C).preferKnowledgeBase?f("",!0):(o(),i(B,{key:0,to:{name:t(O)}},{default:s(()=>[l(w,{class:"bg-gray-900 text-white hover:bg-gray-800",label:"New ticket","icon-right":"plus"})]),_:1},8,["to"]))])]),_:1}),l(t(F),{columns:v,resource:t(a),class:"mt-2.5",doctype:"HD Ticket"},{status:s(({data:e})=>[l(_,{label:S(e.status),theme:t(T).colorMap[e.status],variant:"outline"},null,8,["label","theme"])]),response_by:s(({data:e})=>[e.response_by?(o(),d("span",P,[e.first_responded_on&&t(n)(e.first_responded_on).isBefore(e.response_by)?(o(),i(_,{key:0,label:"Fulfilled",theme:"green",variant:"outline"})):t(n)(e.first_responded_on).isAfter(e.response_by)?(o(),i(_,{key:1,label:"Failed",theme:"red",variant:"outline"})):(o(),i(t(g),{key:2,text:t(n)(e.response_by).long()},{default:s(()=>[y(b(t(n).tz(e.response_by).fromNow()),1)]),_:2},1032,["text"]))])):f("",!0)]),resolution_by:s(({data:e})=>[e.resolution_by?(o(),d("span",$,[e.resolution_date&&t(n)(e.resolution_date).isBefore(e.resolution_by)?(o(),i(_,{key:0,label:"Fulfilled",theme:"green",variant:"outline"})):t(n)(e.resolution_date).isAfter(e.resolution_by)?(o(),i(_,{key:1,label:"Failed",theme:"red",variant:"outline"})):(o(),i(t(g),{key:2,text:t(n)(e.resolution_by).long()},{default:s(()=>[y(b(t(n).tz(e.resolution_by).fromNow()),1)]),_:2},1032,["text"]))])):f("",!0)]),creation:s(({data:e})=>[y(b(t(n).tz(e.creation).fromNow()),1)]),_:1},8,["resource"])])}}});export{se as default};
//# sourceMappingURL=TicketsCustomer-2c7d1ea6.js.map
