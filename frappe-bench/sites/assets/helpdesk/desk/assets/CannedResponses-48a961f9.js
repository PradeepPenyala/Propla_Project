import{_ as B}from"./UserAvatar.vue_vue_type_script_setup_true_lang-a7059022.js";import{_ as z}from"./plus-3ad50efe.js";import{bb as V,at as y,z as $,o as p,e as D,w as c,f as s,q as v,g as l,h as a,bv as j,as as h,d as q,ba as E,v as _,E as F,i as x,F as H,r as S,S as k,ai as T,bg as I,bh as L,a1 as R}from"./index-a86022ab.js";import{_ as A}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-3ebac268.js";import{D as P}from"./Dropdown-068a4fad.js";import{a as U}from"./TextEditor-c90c58ca.js";import{d as Q}from"./vuedraggable.umd-9334f31c.js";import"./iconify-6a43d462.js";import{_ as Y}from"./LayoutHeader-413b8747.js";import"./Avatar.vue_vue_type_script_setup_true_lang-f38fd5a3.js";const G={class:"flex items-center gap-3"},J={class:"text-2xl font-semibold leading-6 text-gray-900"},K={class:"flex flex-col gap-4"},O=s("div",{class:"mb-1.5 text-sm text-gray-600"},v("Title"),-1),W=s("div",{class:"mb-1.5 text-sm text-gray-600"},v("Message"),-1),X={__name:"CannedResponseModal",props:V({name:{type:String,required:!1,default:null},isNew:{type:Boolean,required:!1,default:!1}},{modelValue:{},modelModifiers:{},title:{},titleModifiers:{},message:{},messageModifiers:{}}),emits:V(["update"],["update:modelValue","update:title","update:message"]),setup(m,{emit:b}){const g=m,n=y(m,"modelValue"),o=y(m,"title"),i=y(m,"message"),r=b;async function f(){g.name?await h("frappe.client.set_value",{doctype:"HD Canned Response",name:g.name,fieldname:{title:o.value,message:i.value}}):await h("frappe.client.insert",{doc:{doctype:"HD Canned Response",title:o.value,message:i.value}}),r("update"),n.value=!1}return(w,u)=>{const d=$("Dialog");return p(),D(d,{modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=e=>n.value=e),options:{size:"xl",actions:[{label:m.isNew?"Create":"Update",variant:"solid",onClick:()=>f()}]}},{"body-title":c(()=>[s("div",G,[s("h3",J,v(m.isNew?"Create Canned Response":"Edit Canned Response"),1)])]),"body-content":c(()=>[s("div",K,[s("div",null,[O,l(a(j),{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=e=>o.value=e),variant:"outline",placeholder:"Customer Query Resolved"},null,8,["modelValue"])]),s("div",null,[W,l(a(U),{ref:"content",variant:"outline","editor-class":"!prose-sm overflow-auto min-h-[180px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors","bubble-menu":!0,content:i.value,placeholder:"Your query has been resolved. Thank you for reaching out.",onChange:u[1]||(u[1]=e=>i.value=e)},null,8,["content"])])])]),_:1},8,["modelValue","options"])}}},Z={class:"flex flex-col"},ee={class:"flex-1 overflow-y-auto"},te={key:0,class:"grid grid-cols-4 gap-4 px-5 pb-3"},ae=["onClick"],se={class:"flex items-center justify-between"},oe={class:"truncate text-lg font-medium"},le={class:"mt-2 flex items-center justify-between gap-2"},ne={class:"flex items-center gap-2"},ie={class:"text-sm text-gray-800"},re={class:"text-sm text-gray-700"},ye=q({__name:"CannedResponses",setup(m){const{getUser:b}=E(),g=[{label:"Canned Responses",route:{name:"CannedResponses"}}],n=_(null),o=_(null),i=_(null),r=_(!1),f=F({url:"helpdesk.api.doc.get_list_data",params:{doctype:"HD Canned Response"},auto:!0});function w(d){n.value=d.title,o.value=d.message,i.value=d.name,r.value=!0}async function u(d){await h("frappe.client.delete",{doctype:"HD Canned Response",name:d}),f.reload()}return(d,e)=>{const M=z,C=$("Button"),N=B;return p(),x("div",Z,[l(a(Y),null,{"left-header":c(()=>[l(a(A),{items:g})]),"right-header":c(()=>[l(C,{label:"Create",theme:"gray",variant:"solid",onClick:e[0]||(e[0]=()=>{n.value=null,o.value=null,r.value=!0})},{prefix:c(()=>[l(M,{class:"h-4 w-4"})]),_:1})]),_:1}),s("div",ee,[a(f)?.data?.data?.length?(p(),x("div",te,[(p(!0),x(H,null,S(a(f).data.data,t=>(p(),x("div",{key:t.name,class:"group flex h-56 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-5 py-4 shadow-sm hover:bg-gray-50",onClick:ue=>w(t)},[s("div",se,[s("div",oe,v(t.title),1),l(a(P),{options:[{label:"Delete",icon:"trash-2",onClick:()=>u(t.name)}],onClick:e[1]||(e[1]=T(()=>{},["stop"]))},{default:c(()=>[l(C,{icon:"more-horizontal",variant:"ghosted",class:"hover:bg-white"})]),_:2},1032,["options"])]),t.message?(p(),D(a(U),{key:0,content:t.message,editable:!1,"editor-class":"!prose-sm max-w-none !text-sm text-gray-600 focus:outline-none",class:"flex-1 overflow-hidden"},null,8,["content"])):k("",!0),s("div",le,[s("div",ne,[l(N,{name:t.owner,size:"xs"},null,8,["name"]),s("div",ie,v(a(b)(t.owner).full_name),1)]),l(a(R),{text:a(I)(t.modified,a(L))},{default:c(()=>[s("div",re,v(a(Q).tz(t.modified).fromNow()),1)]),_:2},1032,["text"])])],8,ae))),128))])):k("",!0)]),l(a(X),{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),title:n.value,"onUpdate:title":e[3]||(e[3]=t=>n.value=t),message:o.value,"onUpdate:message":e[4]||(e[4]=t=>o.value=t),name:i.value,"is-new":!i.value,onClose:e[5]||(e[5]=()=>{r.value=!1,n.value=null,o.value=null,i.value=null}),onUpdate:e[6]||(e[6]=()=>{a(f).reload(),r.value=!1,n.value=null,o.value=null,i.value=null})},null,8,["modelValue","title","message","name","is-new"])])}}});export{ye as default};
//# sourceMappingURL=CannedResponses-48a961f9.js.map
