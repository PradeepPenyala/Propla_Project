import{d as H,c as K,N as v,v as C,o as r,e as B,h as i,bk as W,b4 as X,a3 as O,ab as Y,w,g as _,au as Z,aa as k,J as z,L as P,f as p,n as T,i as c,q as S,b7 as U,a7 as A,k as ee,m as te,F as j,r as D,S as $,p as ae,T as I,B as le,a8 as R,l as se}from"./index-a86022ab.js";import"./vuedraggable.umd-9334f31c.js";import"./iconify-6a43d462.js";const he=H({__name:"SearchComplete",props:{value:{type:String,required:!1,default:""},doctype:{type:String,required:!0},searchField:{type:String,required:!1,default:"name"},labelField:{type:String,required:!1,default:"name"},valueField:{type:String,required:!1,default:"name"},pageLength:{type:Number,required:!1,default:100},resetInput:{type:Boolean,required:!1,default:!1}},emits:["change"],setup(y,{emit:V}){const q=V,e=y,m=K({doctype:e.doctype,pageLength:e.pageLength,auto:!0,fields:[e.labelField,e.searchField,e.valueField],filters:{[e.searchField]:["like",`%${e.value}%`]},onSuccess:()=>{u.value=e.value?o.value.find(n=>n.value===e.value):null}}),o=v(()=>m.data?.map(n=>({label:n[e.labelField],value:n[e.valueField]}))||[]),u=C(null);function b(n){m.update({filters:{[e.searchField]:["like",`%${n}%`]}}),m.reload()}return(n,g)=>(r(),B(i(ge),{placeholder:"Select an option",options:o.value,value:u.value,"onUpdate:query":g[0]||(g[0]=f=>b(f)),onChange:g[1]||(g[1]=f=>{y.resetInput||(u.value=f),q("change",f)})},null,8,["options","value"]))}}),re={class:"w-full"},oe=["onClick"],ne={class:"flex items-center"},ue={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-base leading-5"},ie={key:1,class:"text-base leading-5 text-gray-500"},de={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl"},pe={class:"relative px-1.5 pt-0.5"},ce={key:0,class:"px-2.5 py-1.5 text-sm font-medium text-gray-500"},fe={key:0,class:"mt-1.5 rounded-md px-2.5 py-1.5 text-base text-gray-600"},me={key:0,class:"border-t p-1.5 pb-0.5"},ge={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(y,{expose:V,emit:q}){const e=y,m=q,o=C(""),u=C(!1),b=C(null),n=W(),g=X(),f=v(()=>"value"in n),h=v({get(){return f.value?n.value:e.modelValue},set(t){o.value="",t&&(u.value=!1),m(f.value?"change":"update:modelValue",t)}});function E(){u.value=!1}const F=v(()=>!e.options||e.options.length==0?[]:(e.options[0]?.group?e.options:[{group:"",items:e.options}]).map((a,d)=>({key:d,group:a.group,hideLabel:a.hideLabel||!1,items:e.filterable?J(a.items):a.items})).filter(a=>a.items.length>0));function J(t){return o.value?t.filter(a=>[a.label,a.value].some(l=>(l||"").toString().toLowerCase().includes(o.value.toLowerCase()))):t}function M(t){return typeof t=="string"?F.value.flatMap(l=>l.items).find(l=>l.value===t)?.label||t:t?.label}O(o,t=>{m("update:query",t)}),O(u,t=>{t&&Y(()=>{b.value.el.focus()})});const Q=v(()=>e.disabled?"text-gray-600":"text-gray-800"),G=v(()=>{let t={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[e.size],a={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[e.size],d=e.disabled?"disabled":e.variant,l={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",e.variant==="outline"?"border-gray-300":"border-transparent"]}[d];return[t,a,l,Q.value,"transition-colors w-full"]});return V({query:o}),(t,a)=>(r(),B(i(se),{modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=d=>h.value=d),nullable:""},{default:w(({open:d})=>[_(i(Z),{show:u.value,"onUpdate:show":a[2]||(a[2]=l=>u.value=l),class:"w-full"},{target:w(({open:l,togglePopover:s})=>[k(t.$slots,"target",z(P({open:l,togglePopover:s})),()=>[p("div",re,[p("button",{class:T(["flex w-full items-center justify-between focus:outline-none",G.value]),onClick:()=>s()},[p("div",ne,[k(t.$slots,"prefix"),h.value?(r(),c("span",ue,S(M(h.value)),1)):(r(),c("span",ie,S(y.placeholder||""),1))]),_(i(U),{name:"chevron-down",class:"h-4 w-4 text-gray-600","aria-hidden":"true"})],10,oe)])])]),body:w(({isOpen:l})=>[A(p("div",null,[p("div",de,[p("div",pe,[_(i(ee),{ref_key:"search",ref:b,class:"form-input w-full",type:"text",value:o.value,autocomplete:"off",placeholder:"Search",onChange:a[0]||(a[0]=s=>{o.value=s.target.value})},null,8,["value"]),p("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:a[1]||(a[1]=s=>h.value=null)},[_(i(U),{name:"x",class:"w-4"})])]),_(i(te),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:w(()=>[(r(!0),c(j,null,D(F.value,s=>A((r(),c("div",{key:s.key,class:"mt-1.5"},[s.group&&!s.hideLabel?(r(),c("div",ce,S(s.group),1)):$("",!0),(r(!0),c(j,null,D(s.items,x=>(r(),B(i(ae),{key:x.value,as:"template",value:x},{default:w(({active:L,selected:N})=>[p("li",{class:T(["flex items-center rounded px-2.5 py-1.5 text-base",{"bg-gray-100":L}])},[k(t.$slots,"item-prefix",I({ref_for:!0},{active:L,selected:N,option:x})),k(t.$slots,"item-label",I({ref_for:!0},{active:L,selected:N,option:x}),()=>[le(S(x.label),1)])],2)]),_:2},1032,["value"]))),128))])),[[R,s.items.length>0]])),128)),F.value.length==0?(r(),c("li",fe," No results found ")):$("",!0)]),_:3}),i(g).footer?(r(),c("div",me,[k(t.$slots,"footer",z(P({value:b.value?.el._value,close:E})))])):$("",!0)])],512),[[R,l]])]),_:3},8,["show"])]),_:3},8,["modelValue"]))}};export{ge as _,he as a};
//# sourceMappingURL=Autocomplete-28eb1937.js.map
