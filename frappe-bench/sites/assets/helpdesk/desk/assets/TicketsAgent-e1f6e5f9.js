import{_ as Ve}from"./plus-3ad50efe.js";import{d as Z,v as j,N as I,aD as _e,aE as F,aF as be,aG as ae,ae as we,aH as Ze,aI as de,aJ as Je,aK as Xe,aL as ke,aM as Ye,aN as Qe,aO as et,aP as tt,a2 as z,aQ as xe,F as N,aR as ie,x as Ce,y as je,aS as lt,aT as Ie,aU as ve,aV as me,aW as le,aX as Y,aY as ot,aZ as Ae,ac as U,a_ as te,a$ as Q,b0 as ge,o as r,i as C,aa as B,f as b,q as H,h as l,e as R,T as oe,_ as he,S as E,b1 as nt,J,L as se,n as W,ai as pe,b2 as $e,r as X,aq as Se,w as T,G as ne,a1 as st,an as ee,g as h,B as ye,b3 as at,b4 as rt,a5 as it,a3 as ut,z as D,b5 as ct,a7 as dt,a8 as pt,ab as ft,b6 as vt,u as mt,b7 as Me,O as re,b8 as Be,M as gt,b9 as Pe,ba as ht,ao as yt,E as fe}from"./index-a86022ab.js";import{_ as _t}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-3ebac268.js";import{D as bt,d as G}from"./vuedraggable.umd-9334f31c.js";import"./iconify-6a43d462.js";import{D as Oe}from"./Dropdown-068a4fad.js";import{_ as ue,a as wt}from"./Autocomplete-28eb1937.js";import{_ as kt}from"./LayoutHeader-413b8747.js";import{_ as xt,I as Ct}from"./TicketAgentFields.vue_vue_type_style_index_0_scoped_1510d798_lang-6fc9a99d.js";import{u as $t}from"./ticketStatus-6f8b6098.js";import{T as St}from"./TicketIcon-ebfc39b1.js";import{T as Tt}from"./TabButtons-ea997705.js";import{_ as Lt}from"./StarRating.vue_vue_type_script_setup_true_lang-5c4d1ebd.js";import"./Avatar.vue_vue_type_script_setup_true_lang-f38fd5a3.js";import"./label-fe9568ec.js";var Ft=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Ft||{});let Ee=Symbol("PopoverContext");function Te(t){let p=U(Ee,null);if(p===null){let e=new Error(`<${t} /> is missing a parent <${Ne.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,Te),e}return p}let Rt=Symbol("PopoverGroupContext");function De(){return U(Rt,null)}let He=Symbol("PopoverPanelContext");function At(){return U(He,null)}let Ne=Z({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:p,attrs:e,expose:c}){var o;let _=j(null);c({el:_,$el:_});let n=j(1),s=j(null),S=j(null),m=j(null),f=j(null),w=I(()=>_e(_)),u=I(()=>{var d,k;if(!F(s)||!F(f))return!1;for(let K of document.querySelectorAll("body > *"))if(Number(K?.contains(F(s)))^Number(K?.contains(F(f))))return!0;let x=be(),a=x.indexOf(F(s)),g=(a+x.length-1)%x.length,P=(a+1)%x.length,V=x[g],q=x[P];return!((d=F(f))!=null&&d.contains(V))&&!((k=F(f))!=null&&k.contains(q))}),i={popoverState:n,buttonId:j(null),panelId:j(null),panel:f,button:s,isPortalled:u,beforePanelSentinel:S,afterPanelSentinel:m,togglePopover(){n.value=ae(n.value,{0:1,1:0})},closePopover(){n.value!==1&&(n.value=1)},close(d){i.closePopover();let k=(()=>d?d instanceof HTMLElement?d:d.value instanceof HTMLElement?F(d):F(i.button):F(i.button))();k?.focus()}};we(Ee,i),Ze(I(()=>ae(n.value,{0:de.Open,1:de.Closed})));let A={buttonId:i.buttonId,panelId:i.panelId,close(){i.closePopover()}},$=De(),M=$?.registerPopover,[O,L]=Je(),y=Xe({mainTreeNodeRef:$?.mainTreeNodeRef,portals:O,defaultContainers:[s,f]});function v(){var d,k,x,a;return(a=$?.isFocusWithinPopoverGroup())!=null?a:((d=w.value)==null?void 0:d.activeElement)&&(((k=F(s))==null?void 0:k.contains(w.value.activeElement))||((x=F(f))==null?void 0:x.contains(w.value.activeElement)))}return ke(()=>M?.(A)),Ye((o=w.value)==null?void 0:o.defaultView,"focus",d=>{var k,x;d.target!==window&&d.target instanceof HTMLElement&&n.value===0&&(v()||s&&f&&(y.contains(d.target)||(k=F(i.beforePanelSentinel))!=null&&k.contains(d.target)||(x=F(i.afterPanelSentinel))!=null&&x.contains(d.target)||i.closePopover()))},!0),Qe(y.resolveContainers,(d,k)=>{var x;i.closePopover(),et(k,tt.Loose)||(d.preventDefault(),(x=F(s))==null||x.focus())},I(()=>n.value===0)),()=>{let d={open:n.value===0,close:i.close};return z(N,[z(L,{},()=>xe({theirProps:{...t,...e},ourProps:{ref:_},slot:d,slots:p,attrs:e,name:"Popover"})),z(y.MainTreeNode)])}}}),Pt=Z({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(t,{attrs:p,slots:e,expose:c}){var o;let _=(o=t.id)!=null?o:`headlessui-popover-button-${ie()}`,n=Te("PopoverButton"),s=I(()=>_e(n.button));c({el:n.button,$el:n.button}),Ce(()=>{n.buttonId.value=_}),je(()=>{n.buttonId.value=null});let S=De(),m=S?.closeOthers,f=At(),w=I(()=>f===null?!1:f.value===n.panelId.value),u=j(null),i=`headlessui-focus-sentinel-${ie()}`;w.value||ke(()=>{n.button.value=F(u)});let A=lt(I(()=>({as:t.as,type:p.type})),u);function $(d){var k,x,a,g,P;if(w.value){if(n.popoverState.value===1)return;switch(d.key){case te.Space:case te.Enter:d.preventDefault(),(x=(k=d.target).click)==null||x.call(k),n.closePopover(),(a=F(n.button))==null||a.focus();break}}else switch(d.key){case te.Space:case te.Enter:d.preventDefault(),d.stopPropagation(),n.popoverState.value===1&&m?.(n.buttonId.value),n.togglePopover();break;case te.Escape:if(n.popoverState.value!==0)return m?.(n.buttonId.value);if(!F(n.button)||(g=s.value)!=null&&g.activeElement&&!((P=F(n.button))!=null&&P.contains(s.value.activeElement)))return;d.preventDefault(),d.stopPropagation(),n.closePopover();break}}function M(d){w.value||d.key===te.Space&&d.preventDefault()}function O(d){var k,x;t.disabled||(w.value?(n.closePopover(),(k=F(n.button))==null||k.focus()):(d.preventDefault(),d.stopPropagation(),n.popoverState.value===1&&m?.(n.buttonId.value),n.togglePopover(),(x=F(n.button))==null||x.focus()))}function L(d){d.preventDefault(),d.stopPropagation()}let y=Ie();function v(){let d=F(n.panel);if(!d)return;function k(){ae(y.value,{[Q.Forwards]:()=>le(d,Y.First),[Q.Backwards]:()=>le(d,Y.Last)})===ge.Error&&le(be().filter(x=>x.dataset.headlessuiFocusGuard!=="true"),ae(y.value,{[Q.Forwards]:Y.Next,[Q.Backwards]:Y.Previous}),{relativeTo:F(n.button)})}k()}return()=>{let d=n.popoverState.value===0,k={open:d},{...x}=t,a=w.value?{ref:u,type:A.value,onKeydown:$,onClick:O}:{ref:u,id:_,type:A.value,"aria-expanded":n.popoverState.value===0,"aria-controls":F(n.panel)?n.panelId.value:void 0,disabled:t.disabled?!0:void 0,onKeydown:$,onKeyup:M,onClick:O,onMousedown:L};return z(N,[xe({ourProps:a,theirProps:{...p,...x},slot:k,attrs:p,slots:e,name:"PopoverButton"}),d&&!w.value&&n.isPortalled.value&&z(ve,{id:i,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:v})])}}}),Vt=Z({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(t,{attrs:p,slots:e,expose:c}){var o;let _=(o=t.id)!=null?o:`headlessui-popover-panel-${ie()}`,{focus:n}=t,s=Te("PopoverPanel"),S=I(()=>_e(s.panel)),m=`headlessui-focus-sentinel-before-${ie()}`,f=`headlessui-focus-sentinel-after-${ie()}`;c({el:s.panel,$el:s.panel}),Ce(()=>{s.panelId.value=_}),je(()=>{s.panelId.value=null}),we(He,s.panelId),ke(()=>{var L,y;if(!n||s.popoverState.value!==0||!s.panel)return;let v=(L=S.value)==null?void 0:L.activeElement;(y=F(s.panel))!=null&&y.contains(v)||le(F(s.panel),Y.First)});let w=ot(),u=I(()=>w!==null?(w.value&de.Open)===de.Open:s.popoverState.value===0);function i(L){var y,v;switch(L.key){case te.Escape:if(s.popoverState.value!==0||!F(s.panel)||S.value&&!((y=F(s.panel))!=null&&y.contains(S.value.activeElement)))return;L.preventDefault(),L.stopPropagation(),s.closePopover(),(v=F(s.button))==null||v.focus();break}}function A(L){var y,v,d,k,x;let a=L.relatedTarget;a&&F(s.panel)&&((y=F(s.panel))!=null&&y.contains(a)||(s.closePopover(),((d=(v=F(s.beforePanelSentinel))==null?void 0:v.contains)!=null&&d.call(v,a)||(x=(k=F(s.afterPanelSentinel))==null?void 0:k.contains)!=null&&x.call(k,a))&&a.focus({preventScroll:!0})))}let $=Ie();function M(){let L=F(s.panel);if(!L)return;function y(){ae($.value,{[Q.Forwards]:()=>{var v;le(L,Y.First)===ge.Error&&((v=F(s.afterPanelSentinel))==null||v.focus())},[Q.Backwards]:()=>{var v;(v=F(s.button))==null||v.focus({preventScroll:!0})}})}y()}function O(){let L=F(s.panel);if(!L)return;function y(){ae($.value,{[Q.Forwards]:()=>{let v=F(s.button),d=F(s.panel);if(!v)return;let k=be(),x=k.indexOf(v),a=k.slice(0,x+1),g=[...k.slice(x+1),...a];for(let P of g.slice())if(P.dataset.headlessuiFocusGuard==="true"||d!=null&&d.contains(P)){let V=g.indexOf(P);V!==-1&&g.splice(V,1)}le(g,Y.First,{sorted:!1})},[Q.Backwards]:()=>{var v;le(L,Y.Previous)===ge.Error&&((v=F(s.button))==null||v.focus())}})}y()}return()=>{let L={open:s.popoverState.value===0,close:s.close},{focus:y,...v}=t,d={ref:s.panel,id:_,onKeydown:i,onFocusout:n&&s.popoverState.value===0?A:void 0,tabIndex:-1};return xe({ourProps:d,theirProps:{...p,...v},attrs:p,slot:L,slots:{...e,default:(...k)=>{var x;return[z(N,[u.value&&s.isPortalled.value&&z(ve,{id:m,ref:s.beforePanelSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:M}),(x=e.default)==null?void 0:x.call(e,...k),u.value&&s.isPortalled.value&&z(ve,{id:f,ref:s.afterPanelSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:O})])]}},features:Ae.RenderStrategy|Ae.Static,visible:u.value,name:"PopoverPanel"})}}});const jt={class:"flex h-full w-full flex-col items-center justify-center text-base"},It={class:"text-xl font-medium"},Mt={class:"mt-1 text-base text-gray-600"},Bt={__name:"ListEmptyState",setup(t){const p=U("list");return(e,c)=>(r(),C("div",jt,[B(e.$slots,"default",{},()=>[b("div",It,H(l(p).options.emptyState.title),1),b("div",Mt,H(l(p).options.emptyState.description),1),l(p).options.emptyState.button?(r(),R(he,oe({key:0},l(p).options.emptyState.button,{class:"mt-4"}),null,16)):E("",!0)])]))}};function qe(t,p=!0){let e=p?"14px ":"",c=t.map(o=>{let _=o.width||1;return typeof _=="number"?_+"fr":_}).join(" ");return e+c}const Le={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Ot={class:"truncate"},Et={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(t,{emit:p}){const e=t,c=p,o=j(null),_=j(null),n=I(()=>{if(typeof e.item.width=="string"){const f=parseInt(e.item.width);if(e.item.width.includes("rem"))return f*16;if(e.item.width.includes("px"))return f}return _.value.offsetWidth}),s=f=>{const w=f.clientX,u=n.value,i=$=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),o.value.style.backgroundColor="rgb(199 199 199)";let M=u+($.clientX-w);e.item.width=`${M<50?50:M}px`,S(e.item.width)},A=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),o.value.style.backgroundColor="",window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",A)};window.addEventListener("mousemove",i),window.addEventListener("mouseup",A)},S=nt(f=>{e.item.width=f,c("columnWidthUpdated")},e.debounce),m=U("list");return(f,w)=>(r(),C("div",{ref_key:"columnRef",ref:_,class:W(["group flex items-center",t.item.align?l(Le)[t.item.align]:"justify-between"])},[b("div",{class:W(["flex items-center space-x-2 truncate text-sm text-gray-600",f.$attrs.class])},[B(f.$slots,"prefix",J(se({item:t.item}))),B(f.$slots,"default",{},()=>[b("div",Ot,H(t.item.label),1)]),B(f.$slots,"suffix",J(se({item:t.item})))],2),l(m).options.resizeColumn?B(f.$slots,"resizer",J(oe({key:0},{item:t.item})),()=>[b("div",{class:"flex h-4 w-2 cursor-col-resize justify-center",onMousedown:s},[b("div",{ref_key:"resizer",ref:o,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):E("",!0)],2))}},Ue={__name:"ListHeader",emits:["columnWidthUpdated"],setup(t,{emit:p}){const e=p,c=U("list");return(o,_)=>(r(),C("div",{class:"mb-2 grid items-center space-x-4 rounded bg-gray-100 p-2",style:Se({gridTemplateColumns:l(qe)(l(c).columns,l(c).options.selectable)})},[l(c).options.selectable?(r(),R($e,{key:0,class:"cursor-pointer duration-300",modelValue:l(c).allRowsSelected,onClick:pe(l(c).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):E("",!0),B(o.$slots,"default",{},()=>[(r(!0),C(N,null,X(l(c).columns,n=>(r(),R(Et,{key:n.key,item:n,onColumnWidthUpdated:s=>e("columnWidthUpdated",n)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Dt={class:"truncate text-base"},ze={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(t){const p=t,e=I(()=>c(p.item).label||"");function c(_){return _&&typeof _=="object"?_:{label:_}}const o=U("list");return(_,n)=>(r(),R(ne(l(o).options.showTooltip?l(st):"div"),J(se(l(o).options.showTooltip?{text:e.value}:{})),{default:T(()=>[b("div",{class:W(["flex items-center space-x-2",l(Le)[t.align]])},[B(_.$slots,"prefix",{},()=>[t.column.prefix?(r(),R(ne(typeof t.column.prefix=="function"?t.column.prefix({row:t.row}):t.column.prefix),{key:0})):E("",!0)]),B(_.$slots,"default",J(se({label:e.value})),()=>[b("div",Dt,H(t.column?.getLabel?t.column.getLabel({row:t.row}):e.value),1)]),B(_.$slots,"suffix")],2)]),_:3},16))}},Ht={key:0,class:"mx-2 h-px border-t border-gray-200"},Fe={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(t){const p=t,e=U("list"),c=I(()=>e.value.rows?.length?e.value.rows[e.value.rows.length-1][e.value.rowKey]===p.row[e.value.rowKey]:!1),o=I(()=>e.value.selections.has(p.row[e.value.rowKey])),_=I(()=>e.value.options.getRowRoute||e.value.options.onRowClick),n=I(()=>typeof e.value.options.rowHeight=="number"?`${e.value.options.rowHeight}px`:e.value.options.rowHeight);return(s,S)=>(r(),R(ne(l(e).options.getRowRoute?"router-link":"div"),oe({class:[{"cursor-pointer":_.value},"flex flex-col transition-all duration-300 ease-in-out"]},{to:l(e).options.getRowRoute?l(e).options.getRowRoute(t.row):void 0,onClick:l(e).options.onRowClick?()=>l(e).options.onRowClick(t.row):void 0}),{default:T(()=>[(r(),R(ne(l(e).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:T(()=>[b("div",{class:W(["grid items-center space-x-4 rounded px-2",[o.value?"bg-gray-100":"",_.value?o.value?"hover:bg-gray-200":"hover:bg-gray-50":""]]),style:Se({height:n.value,gridTemplateColumns:l(qe)(l(e).columns,l(e).options.selectable)})},[l(e).options.selectable?(r(),R($e,{key:0,modelValue:l(e).selections.has(t.row[l(e).rowKey]),onClick:S[0]||(S[0]=pe(m=>l(e).toggleRow(t.row[l(e).rowKey]),["stop"])),class:"cursor-pointer duration-300"},null,8,["modelValue"])):E("",!0),(r(!0),C(N,null,X(l(e).columns,(m,f)=>(r(),C("div",{key:m.key,class:W([l(Le)[m.align],f==0?"text-gray-900":"text-gray-700"])},[B(s.$slots,"default",oe({ref_for:!0},{idx:f,column:m,item:t.row[m.key]}),()=>[l(e).slots.cell?(r(),R(ne(l(e).slots.cell),oe({key:0,ref_for:!0},{column:m,row:t.row,item:t.row[m.key],align:m.align}),null,16)):(r(),R(ze,{key:1,column:m,row:t.row,item:t.row[m.key],align:m.align},null,8,["column","row","item","align"]))])],2))),128))],6),c.value?E("",!0):(r(),C("div",Ht))]),_:3}))]),_:3},16,["class"]))}},Nt={class:"h-full overflow-y-auto"},Ke={__name:"ListRows",setup(t){const p=U("list");return(e,c)=>(r(),C("div",Nt,[B(e.$slots,"default",{},()=>[(r(!0),C(N,null,X(l(p).rows,o=>(r(),R(Fe,{key:o[l(p).rowKey],row:o},null,8,["row"]))),128))])]))}},qt={},Ut={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"},zt=b("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1),Kt=[zt];function Wt(t,p){return r(),C("svg",Ut,Kt)}const Gt=ee(qt,[["render",Wt]]),Zt={class:"flex items-center"},Jt={class:"w-full py-1.5 pr-2"},Xt={key:1,class:"text-base font-medium leading-6"},Yt=b("div",{class:"mx-2 h-px border-t border-gray-200"},null,-1),Qt={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(t){const p=t,e=U("list");function c(){p.group.collapsed==null&&(p.group.collapsed=!1),p.group.collapsed=!p.group.collapsed}return(o,_)=>(r(),C(N,null,[b("div",Zt,[b("button",{onClick:c,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-gray-100"},[h(Gt,{class:W(["h-4 w-4 text-gray-900 transition-transform duration-200",[t.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),B(o.$slots,"default",{},()=>[b("div",Jt,[l(e).slots["group-header"]?(r(),R(ne(l(e).slots["group-header"]),J(oe({key:0},{group:t.group})),null,16)):(r(),C("span",Xt,H(t.group.group),1))])])]),Yt],64))}},el={key:0,class:"mb-5 mt-2"},tl={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(t){const p=U("list");return(e,c)=>t.group.collapsed?E("",!0):(r(),C("div",el,[B(e.$slots,"default",{},()=>[(r(!0),C(N,null,X(t.group.rows,o=>(r(),R(Fe,{key:o[l(p).rowKey],row:o},null,8,["row"]))),128))])]))}},ll={class:"h-full overflow-y-auto"},ol={__name:"ListGroups",setup(t){const p=U("list");return(e,c)=>(r(),C("div",ll,[(r(!0),C(N,null,X(l(p).rows,o=>(r(),C("div",{key:o.group},[B(e.$slots,"default",{},()=>[h(Qt,{group:o},{default:T(()=>[e.$slots["group-header"]?B(e.$slots,"group-header",oe({key:0,ref_for:!0},{group:o})):E("",!0)]),_:2},1032,["group"]),h(tl,{group:o},null,8,["group"])])]))),128))]))}},nl={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},sl={class:"flex flex-1 justify-between border-r border-gray-300 text-gray-900"},al={class:"flex items-center space-x-3"},rl={class:"mr-3"},il={class:"flex items-center space-x-1"},We=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(t){const p=U("list");let e=I(()=>{let c=p.value.selections.size===1?"Row":"Rows";return`${p.value.selections.size} ${c} selected`});return(c,o)=>(r(),R(at,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:T(()=>[l(p).selections.size?(r(),C("div",nl,[b("div",{class:W(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-white px-4 py-2 shadow-2xl",c.$attrs.class])},[B(c.$slots,"default",J(se({selections:l(p).selections,allRowsSelected:l(p).allRowsSelected,selectAll:()=>l(p).toggleAllRows(!0),unselectAll:()=>l(p).toggleAllRows(!1)})),()=>[b("div",sl,[b("div",al,[h($e,{modelValue:!0,disabled:!0,class:"text-gray-900"}),b("div",null,H(l(e)),1)]),b("div",rl,[B(c.$slots,"actions",J(se({selections:l(p).selections,allRowsSelected:l(p).allRowsSelected,selectAll:()=>l(p).toggleAllRows(!0),unselectAll:()=>l(p).toggleAllRows(!1)})))])]),b("div",il,[h(he,{class:W(["w- text-gray-700",l(p).allRowsSelected?"cursor-not-allowed":""]),disabled:l(p).allRowsSelected,variant:"ghost",onClick:o[0]||(o[0]=_=>l(p).toggleAllRows(!0))},{default:T(()=>[ye(" Select all ")]),_:1},8,["disabled","class"]),h(he,{icon:"x",variant:"ghost",onClick:o[1]||(o[1]=_=>l(p).toggleAllRows(!1))})])])],2)])):E("",!0)]),_:3}))}}),ul={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},cl=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections"],setup(t,{emit:p}){const e=t,c=rt();let o=it(new Set);const _=p;ut(o,u=>{_("update:selections",u)});let n=I(()=>{function u(A){return A===void 0?!0:A}function i(A){return A===void 0?!1:A}return{getRowRoute:e.options.getRowRoute||null,onRowClick:e.options.onRowClick||null,showTooltip:u(e.options.showTooltip),selectable:u(e.options.selectable),resizeColumn:i(e.options.resizeColumn),rowHeight:e.options.rowHeight||40,emptyState:e.options.emptyState}});const s=I(()=>e.rows.length?m.value?o.size===e.rows.reduce((u,i)=>u+i.rows.length,0):o.size===e.rows.length:!1),S=I(()=>n.value.selectable);let m=I(()=>e.rows.every(u=>u.group&&u.rows&&Array.isArray(u.rows)));function f(u){o.delete(u)||o.add(u)}function w(u){if(!u||s.value){o.clear();return}if(m.value){e.rows.forEach(i=>{i.rows.forEach(A=>o.add(A[e.rowKey]))});return}e.rows.forEach(i=>o.add(i[e.rowKey]))}return we("list",I(()=>({rowKey:e.rowKey,rows:e.rows,columns:e.columns,options:n.value,selections:o,allRowsSelected:s.value,slots:c,toggleRow:f,toggleAllRows:w}))),(u,i)=>(r(),C("div",ul,[b("div",{class:W(["flex w-max min-w-full flex-col overflow-y-hidden",u.$attrs.class])},[B(u.$slots,"default",J(se({showGroupedRows:l(m),selectable:S.value})),()=>[h(Ue),e.rows.length?(r(),C(N,{key:0},[l(m)?(r(),R(ol,{key:0})):(r(),R(Ke,{key:1}))],64)):(r(),R(Bt,{key:1})),S.value?(r(),R(We,{key:2})):E("",!0)])],2)]))}}),dl={class:"flex justify-between gap-2"},pl={class:"flex items-center"},fl={key:1,class:"mx-3 h-[80%] border-l"},vl={class:"flex items-center gap-1 text-base text-gray-600"},ml=b("div",null,"of",-1),gl={__name:"ListFooter",props:{modelValue:{type:Number,default:20},options:{type:Object,default:()=>({rowCount:0,totalCount:0,pageLengthOptions:[20,50,100]})}},emits:["update:modelValue","loadMore"],setup(t,{emit:p}){const e=t,c=p,o=I({get:()=>e.modelValue,set:s=>c("update:modelValue",s)}),_=j(e.options.pageLengthOptions||[20,50,100]),n=I(()=>e.options.rowCount&&e.options.totalCount&&e.options.rowCount<e.options.totalCount);return(s,S)=>{const m=D("Button");return r(),C("div",dl,[B(s.$slots,"default",{},()=>[B(s.$slots,"left",{},()=>[h(Tt,{modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=f=>o.value=f),buttons:_.value.map(f=>({label:f,value:f}))},null,8,["modelValue","buttons"])]),B(s.$slots,"right",{},()=>[b("div",pl,[n.value?(r(),R(m,{key:0,label:"Load More",onClick:S[1]||(S[1]=f=>c("loadMore"))})):E("",!0),n.value?(r(),C("div",fl)):E("",!0),b("div",vl,[b("div",null,H(t.options.rowCount||"0"),1),ml,b("div",null,H(t.options.totalCount||"0"),1)])])])])])}}},Re={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(t){const p=t,e=j(null),c=j(null);let o=j(null);function _(){o.value?o.value.update():o.value=vt(e.value.el,c.value.el,{placement:p.placement})}function n(){ft(()=>_())}return ct(()=>{o.value?.destroy()}),(s,S)=>(r(),R(l(Ne),null,{default:T(({open:m})=>[h(l(Pt),{ref_key:"reference",ref:e,as:"div",onClick:n,onFocusin:n,onKeydown:n},{default:T(({open:f})=>[B(s.$slots,"target",{open:f})]),_:3},512),dt(b("div",null,[h(l(Vt),{ref_key:"popover",ref:c,static:"",class:"z-[100]"},{default:T(({open:f,close:w})=>[B(s.$slots,"body",{open:f,close:w})]),_:3},512)],512),[[pt,m]])]),_:3}))}},hl={},yl={width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},_l=b("g",{class:"es-line-reload","clip-path":"url(#a)"},[b("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.743 2.189a6 6 0 0 0-6.558 2.596.5.5 0 0 0 .844.535 5 5 0 0 1 9.12 1.683l-1.187-.686a.5.5 0 0 0-.5.866l2.165 1.25a.5.5 0 0 0 .683-.183l1.25-2.165a.5.5 0 0 0-.866-.5l-.603 1.044a6 6 0 0 0-4.348-4.44ZM3.356 9.024l1.189.687a.5.5 0 0 0 .5-.866L2.88 7.595a.5.5 0 0 0-.683.183L.947 9.943a.5.5 0 1 0 .866.5l.603-1.044a6 6 0 0 0 10.9 1.816.5.5 0 0 0-.844-.536 5 5 0 0 1-9.116-1.655Z",class:"Union","clip-rule":"evenodd"})],-1),bl=b("defs",null,[b("clipPath",{id:"a",class:"a"},[b("path",{fill:"currentColor",d:"M.25 0h16v16h-16z"})])],-1),wl=[_l,bl];function kl(t,p){return r(),C("svg",yl,wl)}const xl=ee(hl,[["render",kl]]),Cl={class:"flex items-center justify-between gap-2 px-5 pb-4 pt-3"},$l={class:"flex items-center gap-2"},Sl=b("div",{class:"-mr-2 h-[70%] border-l"},null,-1),Tl=b("div",{class:"grow"},null,-1),Ll=b("div",{class:"-ml-2 h-[70%] border-l"},null,-1),Fl={class:"flex items-center gap-2"},Rl=Z({__name:"ViewControls",props:{filter:{type:Object,required:!0},sort:{type:Object,required:!0},column:{type:Object,required:!0}},emits:["event:filter","event:sort","event:column","event:reload"],setup(t,{emit:p}){const e=mt();let c=j("All Tickets");const o=t,_=I(()=>[{name:"name",label:"ID",fieldtype:"Data"}]),n=[{label:"All Tickets",onClick:u=>{s("Helpdesk"),f({event:"clear"},"event:filter")}},{label:"My Open Tickets",onClick:u=>{const i=S("Open");f({event:"preset",data:i},"event:filter")}},{label:"My Replied Tickets",onClick:u=>{const i=S("Replied");f({event:"preset",data:i},"event:filter")}},{label:"My Resolved Tickets",onClick:u=>{const i=S("Resolved");f({event:"preset",data:i},"event:filter")}},{label:"My Closed Tickets",onClick:u=>{const i=S("Closed");f({event:"preset",data:i},"event:filter")}}];function s(u){document.title=u}function S(u){return s(`My ${u} Tickets`),document.title=`My ${u} Tickets`,{filters:[{field:o.filter.filterableFields.find(i=>i.fieldname==="status"),operator:"is",value:u},{field:o.filter.filterableFields.find(i=>i.fieldname==="_assign"),operator:"is",value:e.userId}],filtersToApply:{status:["=",u],_assign:["LIKE",`%${e.userId}%`]}}}const m=p;function f(u,i){i==="event:filter"&&(u.event==="clear"?c.value="All Tickets":c.value="Filtered Tickets"),m(i,u)}function w(u,i){if(i===""){f({event:"remove",name:u.name},"event:filter");return}else f({event:"add",data:{field:{fieldname:u.name,fieldtype:u.fieldtype,label:u.label},filterToApply:{[u.name]:["=",i]},operator:"equals",value:i}},"event:filter")}return(u,i)=>{const A=D("Button");return r(),C("div",Cl,[b("div",$l,[h(l(Oe),{options:n},{default:T(({open:$})=>[h(A,{label:l(c)},{suffix:T(()=>[h(l(Me),{name:$?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:2},1032,["label"])]),_:1})]),Sl,h(l(Wo),{class:"flex flex-1 items-center overflow-x-auto px-1",orientation:"horizontal"},{default:T(()=>[(r(!0),C(N,null,X(_.value,$=>(r(),C("div",{key:$.name,class:"min-w-36 m-1"},[h(l(re),{type:"text",placeholder:$.label,debounce:500,onChange:pe(M=>w($,M.target.value),["stop"])},null,8,["placeholder","onChange"])]))),128))]),_:1}),Tl,Ll,b("div",Fl,[h(A,{label:"Refresh",onClick:i[0]||(i[0]=$=>m("event:reload"))},{icon:T(()=>[h(l(xl),{class:"h-4 w-4"})]),_:1}),h(l(Jl),{filters:t.filter.filters,"filterable-fields":t.filter.filterableFields,"onEvent:filter":i[1]||(i[1]=$=>f($,"event:filter"))},null,8,["filters","filterable-fields"]),h(l(uo),{"sortable-fields":t.sort.sortableFields,sorts:t.sort.sorts,"onEvent:sort":i[2]||(i[2]=$=>f($,"event:sort"))},null,8,["sortable-fields","sorts"]),h(l(Ko),{fields:t.column.fields,columns:t.column.columns,"onEvent:column":i[3]||(i[3]=$=>f($,"event:column"))},null,8,["fields","columns"])])])}}}),Al={},Pl={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Vl=b("path",{d:"M2 4.5H14",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),jl=b("path",{d:"M4 8.5H12",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Il=b("path",{d:"M6.5 12.5H9.5",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ml=[Vl,jl,Il];function Bl(t,p){return r(),C("svg",Pl,Ml)}const Ol=ee(Al,[["render",Bl]]),El={class:"text-2xs flex h-5 w-5 items-center justify-center rounded bg-gray-900 pt-[1px] font-medium text-white"},Dl={class:"my-2 rounded bg-white shadow"},Hl={class:"min-w-[400px] p-2"},Nl={key:0},ql={class:"flex items-center gap-2"},Ul={class:"w-13 pl-2 text-end text-base text-gray-600"},zl={id:"fieldname",class:"!min-w-[140px]"},Kl={id:"operator"},Wl={id:"value",class:"!min-w-[140px]"},Gl={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},Zl={class:"flex items-center justify-between gap-2"},Jl=Z({__name:"Filter",props:{filters:{type:Array,required:!0},filterableFields:{type:Array,required:!0}},emits:["event:filter"],setup(t,{emit:p}){let e=p;const c=t;function o(y){let v={event:"add",data:{field:{fieldname:y.fieldname,fieldtype:y.fieldtype,label:y.label,name:y.value,options:y.options},operator:O(y.fieldtype),value:L(y)}};v.data.filterToApply=S({fieldname:v.data.field.fieldname,operator:v.data.operator,value:v.data.value}),e("event:filter",v)}function _(y,v=null,d=null,k=null){let x=JSON.parse(JSON.stringify(c.filters[y]));v&&(x.field=v),d!==null?x.value=d:x.value=c.filters[y].value,k!==null?x.operator=k:x.operator=c.filters[y].operator,e("event:filter",{event:"update",data:{index:y,filterToApply:S({fieldname:x.field.fieldname,operator:x.operator,value:x.value}),field:x.field,operator:x.operator,value:x.value}})}function n(y){e("event:filter",{event:"clear"}),y&&y()}function s(y){e("event:filter",{event:"remove",index:y})}function S(y){let v={},d;const k={is:"=","is not":"!=",equals:"=","not equals":"!=",yes:!0,no:!1,like:"LIKE","not like":"NOT LIKE",">":">","<":"<",">=":">=","<=":"<="};y.fieldname==="_assign"?d=y.operator==="is"?"LIKE":"NOT LIKE":d=k[y.operator.toLowerCase()];let x=y.value;return["LIKE","NOT LIKE"].includes(d)&&!(x.startsWith("%")||x.endsWith("%"))&&(x=`%${x}%`),v[y.fieldname]=[d,x],v}const m=["Check"],f=["Link"],w=["Float","Int"],u=["Select"],i=["Data","Long Text","Small Text","Text Editor","Text"];function A(y){let v=[];return i.includes(y)&&v.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"}),w.includes(y)&&v.push({label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="},{label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"}),(u.includes(y)||f.includes(y))&&v.push({label:"Is",value:"is"},{label:"Is Not",value:"is not"}),m.includes(y)&&v.push({label:"Equals",value:"equals"}),v}function $(y,v){return u.includes(y)?z(re,{type:"select",options:M(v).map(d=>({label:d,value:d}))}):m.includes(y)?z(re,{type:"select",options:[{label:"Yes",value:1},{label:"No",value:0}]}):z(re,{type:"text"})}function M(y){return y.split(`
`)}function O(y){return u.includes(y)||f.includes(y)?"is":m.includes(y)||w.includes(y)?"equals":"like"}function L(y){return u.includes(y.fieldtype)?M(y.options)[0]:m.includes(y.fieldtype)?1:""}return(y,v)=>{const d=D("Button"),k=D("Tooltip"),x=Ve;return r(),R(l(Re),null,{target:T(()=>[h(d,{label:"Filter",class:W(t.filters?.length?"rounded-r-none":"")},Be({prefix:T(()=>[h(Ol,{class:"h-4"})]),_:2},[t.filters.length?{name:"suffix",fn:T(()=>[b("div",El,H(t.filters.length),1)]),key:"0"}:void 0]),1032,["class"]),t.filters?.length?(r(),R(k,{key:0,text:"Clear all Filter"},{default:T(()=>[h(d,{class:"rounded-l-none border-l",icon:"x",onClick:v[0]||(v[0]=pe(a=>n(void 0),["stop"]))})]),_:1})):E("",!0)]),body:T(({close:a})=>[b("div",Dl,[b("div",Hl,[t.filters.length?(r(),C("div",Nl,[(r(!0),C(N,null,X(t.filters,(g,P)=>(r(),C("div",{id:"filter-list",key:P,class:"mb-3 flex items-center justify-between gap-2"},[b("div",ql,[b("div",Ul,H(P==0?"Where":"And"),1),b("div",zl,[h(l(ue),{value:g.field.fieldname,options:t.filterableFields,placeholder:"Filter by...",onChange:V=>_(P,V)},null,8,["value","options","onChange"])]),b("div",Kl,[h(l(re),{modelValue:g.operator,"onUpdate:modelValue":V=>g.operator=V,type:"select",options:A(g.field.fieldtype),placeholder:"Operator",onChange:V=>_(P,null,null,V.target.value)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),b("div",Wl,[f.includes(g.field.fieldtype)?(r(),R(l(wt),{key:g.field.fieldname,doctype:g.field.options,value:g.value.toString(),onChange:V=>_(P,null,V.value)},null,8,["doctype","value","onChange"])):(r(),R(ne($(g.field.fieldtype,g.field.options)),{key:1,modelValue:g.value,"onUpdate:modelValue":V=>g.value=V,placeholder:"Value",onChange:V=>_(P,null,V.target.value)},null,40,["modelValue","onUpdate:modelValue","onChange"]))])]),h(d,{variant:"ghost",icon:"x",onClick:V=>s(P)},null,8,["onClick"])]))),128))])):(r(),C("div",Gl," Empty - Choose a field to filter by ")),b("div",Zl,[h(l(ue),{value:"",options:t.filterableFields,placeholder:"Filter by...",onChange:v[1]||(v[1]=g=>o(g))},{target:T(({togglePopover:g})=>[h(d,{class:"!text-gray-600",variant:"ghost",label:"Add filter",onClick:()=>g()},{prefix:T(()=>[h(x,{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),t.filters.length?(r(),R(d,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear all filter",onClick:()=>n(a)},null,8,["onClick"])):E("",!0)])])])]),_:1})}}}),Xl={},Yl={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ql=gt('<path d="M1.75 3.75H10.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 7.75H7.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 11.75H5.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14.25 8.25L12.25 6.25L10.25 8.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.25 12.25L12.25 6.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>',5),eo=[Ql];function to(t,p){return r(),C("svg",Yl,eo)}const lo=ee(Xl,[["render",to]]),oo={class:"text-2xs flex h-5 w-5 items-center justify-center rounded bg-gray-900 pt-[1px] font-medium text-white"},no={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},so={class:"min-w-[352px] p-2"},ao={key:0,id:"sort-list",class:"mb-3 flex flex-col gap-2"},ro={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},io={class:"flex items-center justify-between gap-2"},uo=Z({__name:"Sort",props:{sortableFields:{type:Array,required:!0},sorts:{type:Array,default:()=>[]}},emits:["event:sort"],setup(t,{emit:p}){const e=t,c=p;function o(m){c("event:sort",{event:"add",data:{fieldname:m,direction:"asc",sortToApply:S(e.sorts.concat([{fieldname:m,direction:"asc"}]))}})}function _(m,f=null,w=null){f||(f=e.sorts[m].fieldname),w||(w="asc"),c("event:sort",{event:"update",data:{index:m,fieldname:f,direction:w,sortToApply:S(e.sorts.map((u,i)=>i===m?{fieldname:f,direction:w}:u))}})}function n(m){c("event:sort",{event:"remove",data:{index:m,sortToApply:S(e.sorts.filter((f,w)=>w!==m))}})}function s(m){c("event:sort",{event:"clear"}),m()}function S(m){let f="";return m.forEach(w=>{f+=`${w.fieldname.value} ${w.direction}, `}),f=f.slice(0,-2),f}return(m,f)=>{const w=D("Button"),u=D("FormControl"),i=D("FeatherIcon");return r(),R(l(Re),null,{target:T(()=>[h(w,{ref:"sortButtonRef",label:"Sort"},Be({prefix:T(()=>[h(lo,{class:"h-4"})]),_:2},[t.sorts?.length?{name:"suffix",fn:T(()=>[b("div",oo,H(t.sorts.length),1)]),key:"0"}:void 0]),1536)]),body:T(({close:A})=>[b("div",no,[b("div",so,[t.sorts?.length?(r(),C("div",ao,[(r(!0),C(N,null,X(t.sorts,($,M)=>(r(),C("div",{key:$.fieldname,class:"flex items-center gap-2"},[h(l(ue),{class:"!w-32",value:$.fieldname,options:t.sortableFields,placeholder:"Sort by",onChange:O=>_(M,O)},null,8,["value","options","onChange"]),h(u,{modelValue:$.direction,"onUpdate:modelValue":O=>$.direction=O,class:"!w-32",type:"select",options:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],placeholder:"Sort by",onChange:O=>_(M,null,O.target.value)},null,8,["modelValue","onUpdate:modelValue","onChange"]),h(w,{variant:"ghost",icon:"x",onClick:O=>n(M)},null,8,["onClick"])]))),128))])):(r(),C("div",ro," Empty - Choose a field to sort by ")),b("div",io,[h(l(ue),{options:t.sortableFields,value:"",placeholder:"Sort by",onChange:f[0]||(f[0]=$=>o($))},{target:T(({togglePopover:$})=>[h(w,{class:"!text-gray-600",variant:"ghost",label:"Add Sort",onClick:M=>$()},{prefix:T(()=>[h(i,{name:"plus",class:"h-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),t.sorts?.length?(r(),R(w,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear Sort",onClick:$=>s(A)},null,8,["onClick"])):E("",!0)])])])]),_:1})}}}),co={},po={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fo=b("path",{d:"M2.35619 8.42909C2.35644 9.77009 2.84031 11.066 3.719 12.079C4.5977 13.092 5.81226 13.7542 7.13977 13.9439C8.46729 14.1336 9.8187 13.8382 10.946 13.1119C12.0732 12.3856 12.9008 11.2771 13.2766 9.98982C13.6525 8.70258 13.5515 7.32295 12.9922 6.10414C12.4329 4.88534 11.4528 3.90914 10.2318 3.35469C9.0108 2.80025 7.63079 2.70476 6.34504 3.08576C5.0593 3.46675 3.95409 4.29867 3.23226 5.42883",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),vo=b("path",{d:"M3.21297 2V5.42886H6.64183",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),mo=[fo,vo];function go(t,p){return r(),C("svg",po,mo)}const ho=ee(co,[["render",go]]),yo={},_o={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bo=b("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 6.75C12.3096 6.75 11.75 6.19036 11.75 5.5C11.75 4.80964 12.3096 4.25 13 4.25C13.6904 4.25 14.25 4.80964 14.25 5.5C14.25 6.19036 13.6904 6.75 13 6.75ZM3 6.75C2.30964 6.75 1.75 6.19036 1.75 5.5C1.75 4.80964 2.30964 4.25 3 4.25C3.69036 4.25 4.25 4.80964 4.25 5.5C4.25 6.19036 3.69036 6.75 3 6.75ZM6.75 5.5C6.75 6.19036 7.30964 6.75 8 6.75C8.69036 6.75 9.25 6.19036 9.25 5.5C9.25 4.80964 8.69036 4.25 8 4.25C7.30964 4.25 6.75 4.80964 6.75 5.5ZM13 11.75C12.3096 11.75 11.75 11.1904 11.75 10.5C11.75 9.80964 12.3096 9.25 13 9.25C13.6904 9.25 14.25 9.80964 14.25 10.5C14.25 11.1904 13.6904 11.75 13 11.75ZM1.75 10.5C1.75 11.1904 2.30964 11.75 3 11.75C3.69036 11.75 4.25 11.1904 4.25 10.5C4.25 9.80964 3.69036 9.25 3 9.25C2.30964 9.25 1.75 9.80964 1.75 10.5ZM8 11.75C7.30964 11.75 6.75 11.1904 6.75 10.5C6.75 9.80964 7.30964 9.25 8 9.25C8.69036 9.25 9.25 9.80964 9.25 10.5C9.25 11.1904 8.69036 11.75 8 11.75Z",fill:"currentColor"},null,-1),wo=[bo];function ko(t,p){return r(),C("svg",_o,wo)}const xo=ee(yo,[["render",ko]]),Co={},$o={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},So=b("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07548 1.50005C8.05087 1.49632 8.02566 1.49438 8 1.49438C7.97434 1.49438 7.94914 1.49632 7.92452 1.50005H3C1.89543 1.50005 1 2.39548 1 3.50005V12.5C1 13.6046 1.89543 14.5 3 14.5H7.92511C7.94954 14.5037 7.97455 14.5056 8 14.5056C8.02545 14.5056 8.05046 14.5037 8.07489 14.5H13C14.1046 14.5 15 13.6046 15 12.5V3.50005C15 2.39548 14.1046 1.50005 13 1.50005H8.07548ZM7.5 2.50005H3C2.44772 2.50005 2 2.94776 2 3.50005V12.5C2 13.0523 2.44772 13.5 3 13.5H7.5L7.5 2.50005ZM8.5 13.5L8.5 2.50005H13C13.5523 2.50005 14 2.94776 14 3.50005V12.5C14 13.0523 13.5523 13.5 13 13.5H8.5Z",fill:"currentColor"},null,-1),To=[So];function Lo(t,p){return r(),C("svg",$o,To)}const Fo=ee(Co,[["render",Lo]]),Ro={},Ao={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Po=b("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 4.5C2.5 3.39543 3.39543 2.5 4.5 2.5H8.5C8.77614 2.5 9 2.27614 9 2C9 1.72386 8.77614 1.5 8.5 1.5H4.5C2.84315 1.5 1.5 2.84315 1.5 4.5V11.5C1.5 13.1569 2.84315 14.5 4.5 14.5H11.5C13.1569 14.5 14.5 13.1569 14.5 11.5V7.5C14.5 7.22386 14.2761 7 14 7C13.7239 7 13.5 7.22386 13.5 7.5V11.5C13.5 12.6046 12.6046 13.5 11.5 13.5H4.5C3.39543 13.5 2.5 12.6046 2.5 11.5V4.5ZM14.1255 2.58446C14.3207 2.3892 14.3207 2.07261 14.1255 1.87735C13.9302 1.68209 13.6136 1.68209 13.4184 1.87735L6.68616 8.60954C6.4909 8.8048 6.4909 9.12139 6.68616 9.31665C6.88143 9.51191 7.19801 9.51191 7.39327 9.31665L14.1255 2.58446Z",fill:"currentColor"},null,-1),Vo=[Po];function jo(t,p){return r(),C("svg",Ao,Vo)}const Io=ee(Ro,[["render",jo]]),Mo={class:"my-2 rounded-lg border border-gray-100 bg-white p-1.5 shadow-xl"},Bo={key:0},Oo={class:"flex cursor-grab items-center justify-between gap-6 rounded px-2 py-1.5 text-base text-gray-800 hover:bg-gray-100"},Eo={class:"flex items-center gap-2"},Do={class:"flex cursor-pointer items-center gap-1"},Ho={class:"mt-1.5 flex flex-col gap-1 border-t pt-1.5"},No={key:1},qo={class:"flex flex-col items-center justify-between gap-2 rounded px-2 py-1.5 text-base text-gray-800"},Uo={class:"flex flex-col items-center gap-3"},zo={class:"flex w-full gap-2 border-t pt-2"},Ko=Z({__name:"ColumnSettings",props:{fields:{type:Array,required:!0},columns:{type:Array,required:!0}},emits:["event:column"],setup(t,{emit:p}){let e=p,c=j(!1);const o=j({old:{},label:"",key:"",width:"10rem"});function _(w){e("event:column",{event:"reset"}),w()}function n(w){c.value=!0,o.value=w,o.value.old={...w}}function s(){c.value=!1,o.value.label=o.value.old.label,o.value.width=o.value.old.width,delete o.value.old}function S(w){let u={event:"add",data:{label:w.label,type:w.type,key:w.value,width:"10rem"}};e("event:column",u)}function m(){c.value=!1,e("event:column",{event:"update"})}function f(w){e("event:column",{event:"remove",data:w})}return(w,u)=>{const i=D("Button"),A=xo,$=D("FeatherIcon"),M=ho,O=D("FormControl");return r(),R(Re,null,{target:T(()=>[h(i,{label:"Columns"},{prefix:T(()=>[h(Fo,{class:"h-4"})]),_:1})]),body:T(()=>[b("div",Mo,[l(c)?(r(),C("div",No,[b("div",qo,[b("div",Uo,[h(O,{modelValue:o.value.label,"onUpdate:modelValue":u[2]||(u[2]=L=>o.value.label=L),type:"text",size:"md",label:"Label",class:"w-full",placeholder:"Column Label"},null,8,["modelValue"]),h(O,{modelValue:o.value.width,"onUpdate:modelValue":u[3]||(u[3]=L=>o.value.width=L),type:"text",size:"md",label:"Width",class:"w-full",placeholder:"Column Width",description:"Width can be in number, pixel or rem (eg. 3, 30px, 10rem)",debounce:500},null,8,["modelValue"])]),b("div",zo,[h(i,{variant:"subtle",label:"Cancel",class:"w-full flex-1",onClick:s}),h(i,{variant:"solid",label:"Update",class:"w-full flex-1",onClick:m})])])])):(r(),C("div",Bo,[h(l(bt),{list:t.columns,"item-key":"key",class:"list-group",onEnd:m},{item:T(({element:L})=>[b("div",Oo,[b("div",Eo,[h(A,{class:"h-3.5"}),b("div",null,H(L.label),1)]),b("div",Do,[h(i,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:y=>n(L)},{default:T(()=>[h(Io,{class:"h-3.5"})]),_:2},1032,["onClick"]),h(i,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:y=>f(L)},{default:T(()=>[h($,{name:"x",class:"h-3.5"})]),_:2},1032,["onClick"])])])]),_:1},8,["list"]),b("div",Ho,[h(l(ue),{value:"",options:t.fields,onChange:u[0]||(u[0]=L=>S(L))},{target:T(({togglePopover:L})=>[h(i,{class:"w-full !justify-start !text-gray-600",variant:"ghost",label:"Add Column",onClick:y=>L()},{prefix:T(()=>[h($,{name:"plus",class:"h-4"})]),_:2},1032,["onClick"])]),_:1},8,["options"]),h(i,{class:"w-full !justify-start !text-gray-600",variant:"ghost",label:"Reset to Default",onClick:u[1]||(u[1]=L=>_(w.close))},{prefix:T(()=>[h(M,{class:"h-4"})]),_:1})])]))])]),_:1})}}}),Wo=Z({__name:"FadedScrollableDiv",props:{maskLength:{type:Number,default:30},orientation:{type:String,default:"vertical"}},setup(t){const p=t,e=j(null),c=j("none"),o=I(()=>p.orientation=="horizontal"?"right":"bottom");function _(){if(!e.value)return;let n=e.value.scrollWidth,s=e.value.clientWidth,S=e.value.scrollHeight,m=e.value.clientHeight,f=e.value.scrollTop,w=e.value.scrollLeft;c.value="none",(o.value=="right"&&n>s||o.value=="bottom"&&S>m)&&(c.value=`linear-gradient(to ${o.value}, transparent, black ${p.maskLength}px, black calc(100% - ${p.maskLength}px), transparent);`),(o.value=="right"&&w-20>s||o.value=="bottom"&&f+m>=S)&&(c.value=`linear-gradient(to ${o.value}, transparent, black ${p.maskLength}px, black 100%, transparent);`),(o.value=="right"&&w==0||o.value=="bottom"&&f==0)&&(c.value=`linear-gradient(to ${o.value}, black calc(100% - ${p.maskLength}px), transparent 100%);`),(o.value=="right"&&s==n||o.value=="bottom"&&m==S)&&(c.value="none")}return Ce(()=>setTimeout(()=>_(),300)),(n,s)=>(r(),C("div",{ref_key:"scrollableDiv",ref:e,style:Se(`maskImage: ${c.value}`),onScroll:_},[B(n.$slots,"default")],36))}}),Go=["onClick"],Zo={key:0},Jo={key:0},Xo={key:1},Yo={key:2},Qo={key:3},en={key:4},tn={key:5},ln={key:1,class:"flex h-full items-center justify-center"},on={class:"flex flex-col items-center gap-3 text-xl font-medium text-gray-500"},nn=b("span",null,"No Tickets Found",-1),sn={class:"mt-3"},an=Z({__name:"TicketsAgentList",props:{columns:{type:Array,required:!0},rows:{type:Array,required:!0},colFieldType:{type:Object,default:()=>({})},pageLength:{type:Number,default:20},paginate:{type:Boolean,default:!0},options:{type:Object,default:()=>({totalCount:0,rowCount:0,selectable:!0})}},emits:["update:pageLength","event:fieldClick","event:export"],setup(t,{emit:p}){const e=$t(),c=j(!1),o=j("Excel"),_=j(!1);let n;const s=t;let S=p,m=j(s.pageLength);function f(u,i,A){if(s.colFieldType[i]==="Link"||s.colFieldType[i]==="Select"||i==="_assign"){if(u.preventDefault(),i==="_assign")if(A.length>1){let $=u.target.closest(".user-avatar");$&&(A=$.getAttribute("data-name"))}else A=A[0].name;S("event:fieldClick",{name:i,type:s.colFieldType[i],value:A})}}const w={Fulfilled:"green",Failed:"red","Resolution Due":"orange","First Response Due":"orange",Paused:"blue"};return(u,i)=>{const A=Ct,$=D("Badge"),M=D("Tooltip"),O=D("Button"),L=D("FormControl"),y=D("Dialog");return r(),C(N,null,[t.rows.length?(r(),R(l(cl),{key:0,class:"px-5",columns:t.columns,rows:t.rows,options:{getRowRoute:v=>({name:"TicketAgent",params:{ticketId:v.name}}),selectable:t.options.selectable,showTooltip:!1},"row-key":"name"},{default:T(()=>[h(l(Ue)),h(l(Ke),null,{default:T(()=>[(r(!0),C(N,null,X(t.rows,v=>(r(),R(l(Fe),{key:v.name,row:v},{default:T(({column:d,item:k})=>[d.key==="_assign"?(r(),C("div",{key:0,class:"flex items-center",onClick:x=>f(x,d.key,k)},[h(l(xt),{avatars:k},null,8,["avatars"])],8,Go)):(r(),R(l(ze),{key:1,item:k,class:"text-base text-gray-700",onClick:x=>f(x,d.key,k)},{prefix:T(()=>[d.key==="status"?(r(),C("div",Zo,[h(A,{class:W(l(e).textColorMap[k])},null,8,["class"])])):E("",!0)]),default:T(()=>[d.key==="agreement_status"?(r(),C("div",Jo,[k?(r(),R($,{key:0,label:k,theme:w[k],variant:"outline"},null,8,["label","theme"])):E("",!0)])):E("",!0),d.type==="Rating"?(r(),C("div",Xo,[h(l(Lt),{rating:k},null,8,["rating"])])):d.key==="response_by"?(r(),C("div",Yo,[v.first_responded_on&&l(G)(v.first_responded_on).isBefore(k)?(r(),R($,{key:0,label:"Fulfilled",theme:"green",variant:"outline"})):l(G)(v.first_responded_on).isAfter(k)?(r(),R($,{key:1,label:"Failed",theme:"red",variant:"outline"})):(r(),R(M,{key:2,text:l(G)(k).long()},{default:T(()=>[ye(H(l(G).tz(k).fromNow()),1)]),_:2},1032,["text"]))])):d.key==="resolution_by"?(r(),C("div",Qo,[v.resolution_date&&l(G)(v.resolution_date).isBefore(k)?(r(),R($,{key:0,label:"Fulfilled",theme:"green",variant:"outline"})):l(G)(v.resolution_date).isAfter(k)?(r(),R($,{key:1,label:"Failed",theme:"red",variant:"outline"})):(r(),R(M,{key:2,text:l(G)(k).long()},{default:T(()=>[ye(H(l(G).tz(k).fromNow()),1)]),_:2},1032,["text"]))])):d.key==="creation"?(r(),C("div",en,H(l(G).tz(k).fromNow()),1)):d.key==="modified"?(r(),C("div",tn,H(l(G).tz(k).fromNow()),1)):E("",!0)]),_:2},1032,["item","onClick"]))]),_:2},1032,["row"]))),128))]),_:1}),h(l(We),null,{actions:T(({selections:v})=>[h(l(Oe),{options:[{group:"Options",hideLabel:!0,items:[{label:"Export",icon:()=>z(l(Me),{name:"download",class:"h-4 w-4"}),onClick:()=>{Pe(n)?n.value=v:n=v,c.value=!0}}]}]},{default:T(()=>[h(O,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})]),_:1},8,["columns","rows","options"])):(r(),C("div",ln,[b("div",on,[h(l(St),{class:"h-10 w-10"}),nn])])),t.rows.length&&t.paginate?(r(),R(l(gl),{key:2,modelValue:l(m),"onUpdate:modelValue":[i[0]||(i[0]=v=>Pe(m)?m.value=v:m=v),i[1]||(i[1]=v=>l(S)("update:pageLength",v))],class:"bottom-0 border-t px-5 py-2",options:{rowCount:t.options.rowCount,totalCount:t.options.totalCount},onLoadMore:i[2]||(i[2]=v=>l(S)("update:pageLength","loadMore"))},null,8,["modelValue","options"])):E("",!0),h(y,{modelValue:c.value,"onUpdate:modelValue":i[5]||(i[5]=v=>c.value=v),options:{title:"Export",actions:[{label:"Download",variant:"solid",onClick:()=>{l(S)("event:export",{export_type:o.value,export_all:_.value,selections:Array.from(l(n)).join(",")}),c.value=!1,o.value="Excel",_.value=!1}}]}},{"body-content":T(()=>[h(L,{modelValue:o.value,"onUpdate:modelValue":i[3]||(i[3]=v=>o.value=v),variant:"outline",label:"Export Type",type:"select",options:[{label:"Excel",value:"Excel"},{label:"CSV",value:"CSV"}],placeholder:"Excel"},null,8,["modelValue"]),b("div",sn,[h(L,{modelValue:_.value,"onUpdate:modelValue":i[4]||(i[4]=v=>_.value=v),type:"checkbox",label:`Export All ${t.options.totalCount} Record(s)`},null,8,["modelValue","label"])])]),_:1},8,["modelValue","options"])],64)}}}),rn={class:"flex flex-col"},Cn=Z({__name:"TicketsAgent",setup(t){const{getUser:p}=ht(),e=[{label:"Tickets",route:{name:"TicketsAgent"}}];let c=yt("tickets_agent",{filtersToApply:{},filters:[],sorts:[],sortsToApply:"modified desc",columns:[],rows:[],pageLength:20}),o=c.value.columns?c.value.columns:[],_=c.value.rows?c.value.rows:[],n=c.value.filtersToApply,s=j(c.value.filters),S=j(c.value.sorts),m=c.value.sortsToApply,f=j(c.value.pageLength),w=f.value;const u=fe({url:"helpdesk.api.doc.get_list_data",params:{doctype:"HD Ticket",filters:n,order_by:m,page_length:f.value,columns:o.length?o:void 0,rows:_.length?_:void 0},auto:!0,transform(a){a.data.forEach(g=>{g.name=g.name.toString();let P=g._assign?JSON.parse(g._assign):null;g._assign=[],P&&P.length?P.forEach(V=>{let q=p(V);g._assign.push({name:q.name,label:q.full_name,image:q.user_image})}):g._assign={name:"",label:"Unassigned",image:""}})},onSuccess(a){o=a.columns,_=a.rows}}),i=I(()=>u?.data?.fields.filter(a=>A.value[a.value]==null)),A=I(()=>{let a={};return u?.data?.columns.forEach(g=>{a[g.key]=g.type}),a});async function $(a,g,P){let V,q,K=JSON.stringify(o.map(ce=>ce.key)),Ge=m;if(g)V=JSON.stringify(n),q=u?.data?.total_count;else{let ce={...n};ce.name=["IN",P],V=JSON.stringify(ce),q=P.length}window.location.href=`/api/method/frappe.desk.reportview.export_query?file_format_type=${a}&title=HD Ticket&doctype=HD Ticket&fields=${K}&filters=${V}&order_by=${Ge}&page_length=${q}&start=0&view=Report&with_comment_count=1`}function M(a){a=="loadMore"?w=u.data.data.length+f.value:(f.value=a,w=a,c.value.pageLength=a),d()}function O(a){s.value.push({field:k.data.find(g=>g.fieldname===a.name),operator:"is",value:a.value}),a.name=="_assign"?n[a.name]=["LIKE",`%${a.value}%`]:n[a.name]=["=",a.value],c.value.filters=s.value,c.value.filtersToApply=n,d()}function L(a){a.event==="add"?(o=[...o,a.data],_=[..._,a.data.key]):a.event==="remove"?(_=_.filter(g=>g!=a.data.key),o=o.filter(g=>g.key!=a.data.key)):a.event==="reset"&&(o=[],_=[]),c.value.columns=o,c.value.rows=_,d()}function y(a){a.event==="add"?(S.value.push(a.data),m=a.data.sortToApply):a.event==="remove"?(S.value.splice(a.index,1),m=a.data.sortToApply):a.event==="clear"?(S.value=[],m="modified desc"):a.event==="update"&&(S.value[a.data.index]=a.data,m=a.data.sortToApply),c.value.sorts=S.value,c.value.sortsToApply=m,d()}function v(a){if(a.event==="add"){let g=s.value.findIndex(P=>P.field.fieldname===a.data.field.fieldname);g!=-1&&(a.event="update",a.data.index=g)}if(a.event==="add"){const g=a.data.field.fieldname,{filterToApply:P}=a.data;s.value.push(a.data),n[g]=P[g]}else if(a.event==="remove")if(a.index!==void 0){const g=s.value[a.index].field.fieldname;s.value.splice(a.index,1),delete n[g]}else s.value.forEach((g,P)=>{g.field.fieldname===a.name&&(s.value.splice(P,1),delete n[a.name])});else if(a.event==="update"){const g=a.data.field.fieldname,P=s.value[a.data.index].field.fieldname,{filterToApply:V}=a.data;s.value[a.data.index]=a.data,delete n[P],n[g]=V[g]}else if(a.event==="clear"){s.value=[];for(let g in n)delete n[g]}else if(a.event==="preset"){s.value=a.data.filters;for(let g in n)delete n[g];Object.assign(n,a.data.filtersToApply)}c.value.filters=s.value,c.value.filtersToApply=n,d()}function d(){u.update({params:{order_by:m,filters:n,page_length:w,doctype:"HD Ticket",columns:o.length?o:void 0,rows:_.length?_:void 0}}),u.reload()}const k=fe({url:"helpdesk.api.doc.get_filterable_fields",cache:["DocField","HD Ticket"],auto:!0,params:{doctype:"HD Ticket",append_assign:!0},transform:a=>a.sort((g,P)=>{const V=g.label.toUpperCase(),q=P.label.toUpperCase();return V<q?-1:V>q?1:0}).map(g=>({label:g.label,value:g.fieldname,...g}))}),x=fe({url:"helpdesk.api.doc.sort_options",auto:!0,params:{doctype:"HD Ticket"}});return(a,g)=>{const P=Ve,V=D("Button"),q=D("RouterLink");return r(),C("div",rn,[h(l(kt),null,{"left-header":T(()=>[h(l(_t),{items:e})]),"right-header":T(()=>[h(q,{to:{name:"TicketAgentNew"}},{default:T(()=>[h(V,{label:"Create",theme:"gray",variant:"solid"},{prefix:T(()=>[h(P,{class:"h-4 w-4"})]),_:1})]),_:1})]),_:1}),h(l(Rl),{filter:{filters:l(s),filterableFields:l(k).data},sort:{sorts:l(S),sortableFields:l(x).data},column:{fields:i.value,columns:l(o)},"onEvent:sort":y,"onEvent:filter":v,"onEvent:column":L,"onEvent:reload":g[0]||(g[0]=K=>d())},null,8,["filter","sort","column"]),h(l(an),{rows:l(u)?.data?.data||[],columns:l(o),"page-length":l(f),"col-field-type":A.value,options:{rowCount:l(u)?.data?.row_count,totalCount:l(u)?.data?.total_count},"onUpdate:pageLength":M,"onEvent:fieldClick":O,"onEvent:export":g[1]||(g[1]=K=>{$(K.export_type,K.export_all,K.selections)})},null,8,["rows","columns","page-length","col-field-type","options"])])}}});export{Cn as default};
//# sourceMappingURL=TicketsAgent-e1f6e5f9.js.map
