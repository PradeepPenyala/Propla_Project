import{d as N,o as c,i as _,f as s,q as v,aa as S,t as R,v as l,I as T,W as H,E as L,g as a,w as n,h as e,e as k,F as O,r as q,ai as G,b as F,a4 as x,_ as y,O as g,D as $,$ as K,Z as M}from"./index-a86022ab.js";import{c as P}from"./listManager-63aba0ed.js";import{u as D}from"./error-90c51c34.js";import"./vuedraggable.umd-9334f31c.js";import{_ as W}from"./EmptyMessage.vue_vue_type_script_setup_true_lang-123dde9f.js";import"./iconify-6a43d462.js";import{_ as Y}from"./plus-3ad50efe.js";import{_ as Z}from"./KnowledgeBaseCategoryHeader.vue_vue_type_script_setup_true_lang-fdc5e1c1.js";import{_ as j}from"./KnowledgeBaseIconSelector.vue_vue_type_script_setup_true_lang-3b47791e.js";import{I as z}from"./edit-3-c163ee41.js";import"./util-e9020baf.js";const J={class:"h-full cursor-pointer rounded border p-4 hover:border-gray-400"},Q={class:"mb-1 block text-lg font-medium text-gray-900"},X={class:"line-clamp-3 text-base text-gray-700"},ee=N({__name:"HCard",props:{title:{},description:{}},setup(V){return(i,w)=>(c(),_("div",J,[s("span",null,[s("span",Q,v(i.title),1),S(i.$slots,"description",{},()=>[s("span",X,v(i.description),1)])]),S(i.$slots,"bottom")]))}}),te={class:"flex grow flex-col"},oe={class:"space-x-2"},ae={key:1,class:"gap-4.5 grid grid-cols-3 px-5"},se={class:"text-base text-gray-600"},re={class:"space-y-4"},le={class:"space-y-2"},ie=s("div",{class:"text-xs text-gray-700"},"Title",-1),ne={class:"flex items-center gap-2"},ce={class:"space-y-2"},de=s("div",{class:"text-xs text-gray-700"},"Description",-1),ue={class:"space-y-4"},Ee=N({__name:"KnowledgeBaseCategory",props:{categoryId:{type:String,required:!0}},setup(V){const i=V,w=F(),E=R(i,"categoryId"),u=l(""),f=l(""),d=l(!1),A=l(""),B=l(""),b=l(""),p=l(!1),r=T({doctype:"HD Article Category",name:E.value,auto:!0,setValue:{onSuccess(){H({title:"Category updated",icon:"check",iconClasses:"text-green-500"})},onError:D({title:"Error updating category"})}}),I=K(()=>r.setValue.submit({category_name:A.value||r.doc.category_name,description:B.value||r.doc.description,icon:b.value||r.doc.icon}),500),h=L({url:"frappe.client.insert",debounce:500,makeParams(){return{doc:{doctype:"HD Article Category",category_name:u.value,description:f.value,parent_category:r.doc?.name}}},validate(m){if(x.isEmpty(m.doc.category_name))return"Category name is required"},onSuccess(){d.value=!1,C.reload()},onError:D({title:"Error creating sub category"})}),C=P({doctype:"HD Article Category",filters:{parent_category:E.value},auto:!0});function U(m){w.push({name:M,params:{subCategoryId:m}})}return(m,o)=>(c(),_("div",te,[a(Z,{title:e(r).doc?.category_name,description:e(r).doc?.description},{right:n(()=>[s("div",oe,[a(e(y),{label:"Edit",theme:"gray",variant:"outline",onClick:o[0]||(o[0]=t=>p.value=!p.value)},{prefix:n(()=>[a(e(z),{class:"h-4 w-4"})]),_:1}),a(e(y),{label:"Add new",theme:"gray",variant:"solid",onClick:o[1]||(o[1]=t=>d.value=!d.value)},{prefix:n(()=>[a(e(Y),{class:"h-4 w-4"})]),_:1})])]),_:1},8,["title","description"]),e(x.isEmpty)(e(C).data)?(c(),k(W,{key:0,message:"This category is empty"})):(c(),_("div",ae,[(c(!0),_(O,null,q(e(C).data,t=>(c(),k(e(ee),{key:t.name,description:t.description,title:t.category_name,class:"w-full place-self-center",onClick:pe=>U(t.name)},{bottom:n(()=>[s("div",se,v(t.count_article?t.count_article:"No")+" "+v(t.count_article>1?"articles":"article"),1)]),_:2},1032,["description","title","onClick"]))),128))])),a(e($),{modelValue:p.value,"onUpdate:modelValue":o[5]||(o[5]=t=>p.value=t),options:{title:"Edit"}},{"body-content":n(()=>[s("div",re,[s("div",le,[ie,s("div",ne,[a(j,{icon:b.value||e(r).doc?.icon,onSelect:o[2]||(o[2]=t=>b.value=t)},null,8,["icon"]),a(e(g),{modelValue:e(r).doc.category_name,"onUpdate:modelValue":o[3]||(o[3]=t=>e(r).doc.category_name=t),placeholder:"A brief guide",type:"text"},null,8,["modelValue"])])]),s("div",ce,[de,a(e(g),{modelValue:e(r).doc.description,"onUpdate:modelValue":o[4]||(o[4]=t=>e(r).doc.description=t),placeholder:"A short description",type:"textarea"},null,8,["modelValue"])]),a(e(y),{class:"w-full",label:"Save",theme:"gray",variant:"solid",onClick:e(I)},null,8,["onClick"])])]),_:1},8,["modelValue"]),a(e($),{modelValue:d.value,"onUpdate:modelValue":o[9]||(o[9]=t=>d.value=t),options:{title:"New Sub category"}},{"body-content":n(()=>[s("form",{onSubmit:o[8]||(o[8]=G((...t)=>e(h).submit&&e(h).submit(...t),["prevent"]))},[s("div",ue,[a(e(g),{modelValue:u.value,"onUpdate:modelValue":o[6]||(o[6]=t=>u.value=t),type:"text",label:"Name",placeholder:"Name"},null,8,["modelValue"]),a(e(g),{modelValue:f.value,"onUpdate:modelValue":o[7]||(o[7]=t=>f.value=t),type:"textarea",label:"Description",placeholder:"Description"},null,8,["modelValue"]),a(e(y),{disabled:e(x.isEmpty)(u.value),class:"w-full",label:"Create",theme:"gray",variant:"solid"},null,8,["disabled"])])],32)]),_:1},8,["modelValue"])]))}});export{Ee as default};
//# sourceMappingURL=KnowledgeBaseCategory-607c0224.js.map
